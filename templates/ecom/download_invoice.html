<!DOCTYPE html>
<html lang="en">
{% load static %}
{% load humanize %}
{% load custom_filters %}
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    .invoice-box { max-width: 800px; margin: auto; border: 1px solid #eee; padding: 30px; }
    h2 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background: #f2f2f2; }
    .right { text-align: right; }
    .summary-table { margin-top: 30px; }
    .summary-table td { border: none; }
    .address-box { margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px; }
    .total-row { font-weight: bold; }
  </style>
</head>
<body>
  <div class="invoice-box">
    <h2>Order Invoice</h2>

       <strong>Order Date:</strong> {{ order.order_date|date:"F d, Y" }}</p>
    <div class="address-box">
      <strong>Customer:</strong> {{ customer.get_full_name }}<br>
      <strong>Contact:</strong> {{ customer.mobile }}<br>
      <strong>Address:</strong>
      {{ customer.street_address }},
      {% if customer.barangay %}{{ customer.barangay|barangay_name }}, {% endif %}
      {{ customer.citymun|citymun_name }},
      {{ customer.province|province_name }},
      {{ customer.region|region_name }},
      {{ customer.postal_code }}
    </div>
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>Size</th>
          <th>Quantity</th>
          <th>Unit Price</th>
          <th class="right">Total</th>
        </tr>
      </thead>
      <tbody>
        {% for p in products %}
        <tr>
          <td>{{ p.item.product.name }}</td>
          <td>{{ p.size }}</td>
          <td class="right">{{ p.quantity }}</td>
             <td class="right">&#8369;{{ p.unit_price|floatformat:2|intcomma }}</td>
              <td class="right">&#8369;{{ p.line_total|floatformat:2|intcomma }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <table class="summary-table" style="width: 100%;">
      <tr>
        <td class="right">VAT (12%):</td>
        <td class="right">&#8369;{{ vat_amount|floatformat:2|intcomma }}</td>
      </tr>
      <tr>
        <td class="right">Delivery Fee:</td>
        <td class="right">&#8369;{{ delivery_fee|floatformat:2|intcomma }}</td>
      </tr>
      <tr class="total-row">
        <td class="right">Grand Total:</td>
                <td class="right">&#8369;{{ grand_total|floatformat:2|intcomma }}</td>
      </tr>
    </table>
  </div>
</body>
</html>
